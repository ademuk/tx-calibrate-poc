(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,a){e.exports={Calibrate:"Calibrate_Calibrate__lNyLU",txChannelWrapper:"Calibrate_txChannelWrapper__NHufk",txChannel:"Calibrate_txChannel__fhGk7",meter:"Calibrate_meter__3SaHl",fill:"Calibrate_fill__23siV",fill0:"Calibrate_fill0__3OkNs",fill1:"Calibrate_fill1__1LedO",fill2:"Calibrate_fill2__2Y5zv",fill3:"Calibrate_fill3__13Uyi",label:"Calibrate_label__1Lmpx",matchedChannel:"Calibrate_matchedChannel__T9NGi",ChannelDetect:"Calibrate_ChannelDetect__3nXWV",restartButton:"Calibrate_restartButton__7fvJ7"}},,,,function(e,t,a){e.exports={MockMsp:"MockMsp_MockMsp__1-hMS",inlineInput:"MockMsp_inlineInput__29yJV"}},function(e,t,a){e.exports={App:"App_App__2qSsh","App-header":"App_App-header__3Ih27",MockMsp:"App_MockMsp__2amMc"}},,,function(e,t,a){e.exports={buttons:"Initial_buttons__zKnvT"}},function(e,t,a){e.exports={Calibrator:"Calibrator_Calibrator__mjA8A"}},function(e,t,a){e.exports=a(18)},,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),c=a.n(r),i=a(1),o=a(3),u=a(5),m=n.createContext(),s={rxrange:[[1e3,2e3],[1e3,2e3],[1e3,2e3],[1e3,2e3]],rxmap:"AETR1234"},p=function(e,t){switch(t.type){case"set":return Object(u.a)({},e,Object(o.a)({},t.key,t.value))}};function b(e){var t=n.useReducer(p,s),a=Object(i.a)(t,2),l=[a[0],a[1]];return n.createElement(m.Provider,{value:l},e.children)}function v(e){var t=Object(n.useContext)(m),a=Object(i.a)(t,2),l=a[0],r=a[1];return[l[e],function(t){return r({type:"set",key:e,value:t})}]}var h=a(10),E=a.n(h),f=1e3,d=2e3,g=function(e){var t=e.onStart,a=v("rxrange"),n=Object(i.a)(a,2),r=n[0],c=n[1],o=function(e){return e.every(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return a===f&&n===d})};return null===r?"Loading":l.a.createElement("div",null,l.a.createElement("p",null,"Before you start:"),l.a.createElement("ol",null,!o(r)&&l.a.createElement("li",null,"Your rxrange setting has custom values. Running this calibration will reset these"),l.a.createElement("li",null,"It is recommended that you reset any custom endpoints and/or trims on your transmitter"),l.a.createElement("li",null,"Power up you receiver and transmitter (Don't forget to remove your props if applicable)")),l.a.createElement("div",{className:E.a.buttons},l.a.createElement("button",{onClick:function(){o(r)||c(r.map(function(){return[f,d]})),t&&t()},className:"button"},"Start Calibration")),!1)},C=450,_=function(e){var t=e.name,a=e.txValues,r=e.detectedChannels,c=e.onDetect,o=Object(n.useState)(a),u=Object(i.a)(o,2),m=u[0];u[1];var s,p=(s=a,m.findIndex(function(e,t){return Math.abs(e-s[t])>C}));return p>-1&&-1===Object.values(r).indexOf(p)&&c(p),l.a.createElement("p",null,"Please move ",l.a.createElement("strong",null,t)," to its extremes, then click next")},x=a(2),O=a.n(x),j=a(4),y=a.n(j),k=[{name:"Throttle",code:"T"},{name:"Yaw",code:"R"},{name:"Pitch",code:"E"},{name:"Roll",code:"A"}],N=function(e){var t=e.txValues,a=e.onRestart,r=e.onDone;if(null===t)return"Loading";var c=Object(n.useState)(0),m=Object(i.a)(c,2),s=m[0],p=m[1],b=Object(n.useState)({}),h=Object(i.a)(b,2),E=h[0],f=h[1],d=Object(n.useState)(t),g=Object(i.a)(d,2),C=g[0],x=g[1],j=Object(n.useState)(t),N=Object(i.a)(j,2),A=N[0],w=N[1],M=v("rxrange"),I=Object(i.a)(M,2),R=(I[0],I[1]),T=v("rxmap"),S=Object(i.a)(T,2),B=(S[0],S[1]);function D(e){var t=Object.keys(e).reduce(function(t,a){return t[e[a]]=a,t},{});return k.map(function(e,a){var n=t[a];return k[n].code})}function L(){return W.map(function(e,t){return[e,J[t]]})}function V(e){f(Object(u.a)({},E,Object(o.a)({},s,e)))}function P(){a()}var W=t.map(function(e,t){return Math.min(C[t],e)}),J=t.map(function(e,t){return Math.max(A[t],e)});return A.every(function(e,t){return e===J[t]})||w(J),C.every(function(e,t){return e===W[t]})||x(W),l.a.createElement("div",{className:O.a.Calibrate},s!==k.length&&t.map(function(e,t){var a=Object.values(E).indexOf(t);return l.a.createElement("div",{key:t,className:O.a.txChannelWrapper},l.a.createElement("div",{className:O.a.txChannel},l.a.createElement("div",{className:O.a.matchedChannel},a>-1&&" \u2714 ".concat(k[a].name)),l.a.createElement("div",{className:O.a.meter},l.a.createElement("div",{className:y()(O.a.fill,O.a["fill".concat(t)]),style:{left:"".concat((W[t]-1e3)/10,"%"),right:"".concat((2e3-J[t])/10,"%")}}),l.a.createElement("div",{class:O.a.label},e))))}),l.a.createElement("div",{className:O.a.ChannelDetect},k.map(function(e,a){var n=e.name;return s===a&&l.a.createElement(_,{name:n,txValues:t,detectedChannels:E,onDetect:V,key:n})}),s!==k.length&&l.a.createElement("button",{onClick:P,className:y()(O.a.restartButton,"button","button-outline")},"Restart"),s<k.length&&l.a.createElement("button",{onClick:function(){p(s+1)},disabled:s===Object.keys(E).length,className:y()(O.a.nextButton,"button")},"Next")),s===k.length&&l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("p",null,"The following settings are ready to be applied:"),l.a.createElement("ul",null,l.a.createElement("li",null,"rxrange:",l.a.createElement("ul",null,L().map(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return l.a.createElement("li",null,"".concat(a," - ").concat(n))}))),l.a.createElement("li",null,"Channel mapping: ",D(E)))),l.a.createElement("button",{onClick:P,className:y()(O.a.restartButton,"button","button-outline")},"Restart"),l.a.createElement("button",{onClick:function(){var e=D(E);B("".concat(e.join(""),"1234")),R(L()),r()},className:"button"},"Apply settings")))},A=function(e){var t=e.onRestart;return l.a.createElement("div",null,l.a.createElement("h2",null,"Calibration complete"),l.a.createElement("p",null,"You're all done!"),l.a.createElement("p",null,l.a.createElement("button",{class:"button button-outline",onClick:t},"Restart")))},w=a(11),M=a.n(w),I={INITIAL:"initial",CALIBRATE:"calibrate",DONE:"done"},R=function(e){var t=e.txValues,a=Object(n.useState)("initial"),r=Object(i.a)(a,2),c=r[0],o=r[1];function u(){o(I.INITIAL)}return l.a.createElement("div",{className:M.a.Calibrator},c===I.INITIAL&&l.a.createElement(g,{onStart:function(){o(I.CALIBRATE)}}),c===I.CALIBRATE&&l.a.createElement(N,{txValues:t,onDone:function(){o(I.DONE)},onRestart:u}),c===I.DONE&&l.a.createElement(A,{onRestart:u}))},T=function(e){var t=e.label,a=e.value,n=e.onChange,r=e.options;return l.a.createElement("div",null,l.a.createElement("span",{style:{display:"inline-block",width:"70px"}},t),l.a.createElement("input",{type:"range",min:r.min,max:r.max,value:a,onChange:function(e){return n(e.target.value)},step:1,style:{"margin-right":"10px"}}),a)},S=function(e){var t=e.values,a=e.onChange,r=Object(n.useState)(987),c=Object(i.a)(r,2),o=c[0],u=c[1],m=Object(n.useState)(2011),s=Object(i.a)(m,2),p=s[0],b=s[1],v=Object(i.a)(t,4),h=v[0],E=v[1],f=v[2],d=v[3];return l.a.createElement("div",{style:{overflow:"hidden"}},l.a.createElement("div",{style:{float:"right",width:"300px"}},l.a.createElement("h4",null,"TX endpoints"),l.a.createElement("div",null,"Min ",l.a.createElement("input",{value:o,onChange:function(e){return u(e.target.value)},type:"number",style:{display:"inline",width:"100px","margin-right":"10px"}}),"Max ",l.a.createElement("input",{value:p,onChange:function(e){return b(e.target.value)},type:"number",style:{display:"inline",width:"100px"}}))),l.a.createElement("h3",null,"TX"),l.a.createElement(T,{label:"Throttle",value:h,onChange:function(e){return a([e,E,f,d])},options:{min:o,max:p}}),l.a.createElement(T,{label:"Aileron",value:E,onChange:function(e){return a([h,e,f,d])},options:{min:o,max:p}}),l.a.createElement(T,{label:"Elevator",value:f,onChange:function(e){return a([h,E,e,d])},options:{min:o,max:p}}),l.a.createElement(T,{label:"Rudder",value:d,onChange:function(e){return a([h,E,f,e])},options:{min:o,max:p}}))},B=a(6),D=a.n(B),L=function(){var e=v("rxrange"),t=Object(i.a)(e,2),a=t[0],n=t[1],r=v("rxmap"),c=Object(i.a)(r,2),o=c[0],u=c[1];function m(e,t){return function(l){n(a.map(function(a,n){var r=Object(i.a)(a,2),c=r[0],o=r[1];return n===e?0===t?[parseInt(l.target.value,10),o]:[c,parseInt(l.target.value,10)]:[c,o]}))}}return l.a.createElement("div",{className:D.a.MockMsp},l.a.createElement("div",null,l.a.createElement("h3",null,"MSP"),l.a.createElement("div",{style:{float:"right"}},l.a.createElement("h4",null,"Channel mapping"),l.a.createElement("select",{value:o,onChange:function(e){u(e.target.value)}},l.a.createElement("option",{value:"AETR1234"},"AETR (FrSky / Futaba / Hitec)"),l.a.createElement("option",{value:"TAER1234"},"TAER (Spektrum / Graupner / JR)"))),l.a.createElement("h4",null,"rxrange"),a.map(function(e,t){var a=Object(i.a)(e,2),n=a[0],r=a[1];return l.a.createElement("div",{key:t},"ch",t+1," ",l.a.createElement("input",{value:n,onChange:m(t,0),type:"number",className:D.a.inlineInput}),"-",l.a.createElement("input",{value:r,onChange:m(t,1),type:"number",className:D.a.inlineInput}))})))},V=a(7),P=a.n(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=(t[0],t[1],Object(n.useState)([1500,1500,1500,1500])),r=Object(i.a)(a,2),c=r[0],o=r[1];return l.a.createElement(b,null,l.a.createElement("div",{className:P.a.App},l.a.createElement("header",{className:"App-header"},l.a.createElement("img",{src:"https://raw.githubusercontent.com/wiki/betaflight/betaflight/images/betaflight/bf_logo.png",style:{float:"right",width:"200px",padding:"2px 0 0 0"}}),l.a.createElement("h1",null,"TX Calibration PoC")),l.a.createElement(R,{txValues:c}),l.a.createElement("div",{className:P.a.MockMsp},l.a.createElement(S,{values:c,onChange:o}),l.a.createElement(L,null))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.71704a02.chunk.js.map